/* Warm modern theme */
:root{
  --bg-1: #fff2e6;   /* soft cream */
  --bg-2: #ffe6cc;   /* warm peach */
  --card: #fffaf6;   /* near-white card */
  --muted: #6b4a39;  /* warm muted brown */
  --accent: #d6723a; /* warm orange */
  --accent-2: #f2a85b;
  --shadow: rgba(71, 45, 27, 0.12);
  --glass: rgba(255,255,255,0.6);
  --key-white: #fcf7f2;
  --key-black: #2b1f1a;
}

/* typography */
  --ui-font: "Poppins", -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  --heading-font: "Merriweather", Georgia, "Times New Roman", serif;

*{box-sizing:border-box}
html,body{height:100%}

body {
  margin: 0;
  font-family: var(--ui-font);
  background: linear-gradient(180deg,var(--bg-1) 0%, var(--bg-2) 100%);
  color: #3d2b24;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  padding: 28px;
}

/* app card */
.app {
  max-width: 980px;
  margin: 0 auto;
  background: linear-gradient(180deg,var(--card), #fff);
  border-radius: 14px;
  padding: 22px;
  box-shadow: 0 8px 30px var(--shadow), inset 0 1px 0 rgba(255,255,255,0.6);
  border: 1px solid rgba(200,150,110,0.08);
}

/* headings use a stylish serif for character */
h1, h2, h3 {
  font-family: var(--heading-font);
  color: var(--muted);
  margin: 0;
  line-height: 1.05;
}

/* header */
h1 {
  margin: 0 0 6px 0;
  font-size: 24px;
  letter-spacing: -0.2px;
  color: var(--muted);
}
header p {
  margin: 0 0 12px 0;
  color: #7a5b4a;
  font-size: 14px;
}

/* controls */
.controls {
  display:flex;
  gap:12px;
  align-items:center;
  flex-wrap:wrap;
  margin-bottom:18px;
}
.controls label {
  font-size:13px;
  color:#6b4a39;
  margin-right:6px;
}
.controls select, .controls input[type="number"]{
  padding:8px 10px;
  border-radius:8px;
  border:1px solid rgba(120,90,60,0.12);
  background: linear-gradient(180deg, var(--glass), rgba(255,255,255,0.9));
  box-shadow: 0 2px 8px rgba(95,60,40,0.04);
  color: #5a4236;
  font-size:14px;
}
.controls input[type="number"] {
  min-width:72px;
}
.controls select {
  min-width:72px;
  /* Custom dropdown arrow */
  appearance: none; /* Hide default arrow */
  -webkit-appearance: none; /* For Safari */
  background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%236b4a39%22%20d%3D%22M287%2C114.7L159.2%2C242.5c-4.5%2C4.5-10.6%2C6.7-16.8%2C6.7c-6.1%2C0-12.2-2.2-16.8-6.7L5.4%2C114.7c-9-9-9-23.5%2C0-32.5s23.5-9%2C32.5%2C0l118.8%2C118.7l118.7-118.7c9-9%2C23.5-9%2C32.5%2C0S296%2C105.7%2C287%2C114.7z%22%2F%3E%3C%2Fsvg%3E');
  background-repeat: no-repeat;
  background-position: right 10px center; /* Position custom arrow */
  background-size: 10px; /* new: scale down the arrow */
  padding-right: 30px; /* Make space for the custom arrow */
}

/* buttons */
button {
  border: none;
  padding: 8px 12px;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  color: #fff;
  background: linear-gradient(180deg,var(--accent) 0%, var(--accent-2) 100%);
  box-shadow: 0 6px 18px rgba(214,114,58,0.18);
  transition: transform .12s ease, box-shadow .12s ease, opacity .12s;
}
button:active { transform: translateY(1px) scale(.998); }
button[disabled] { opacity: .6; cursor: default; transform:none; box-shadow:none; }

/* layout sections */
#notation-area { margin-top:6px; }
#title { font-size:18px; margin:10px 0 6px 0; color: #4a3228; }

/* canvas / staff card */
canvas#staffCanvas {
  width:100%;
  max-width:880px;
  height:220px;
  display:block;
  border-radius:10px;
  border:1px solid rgba(120,90,60,0.06);
  background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(254,250,248,0.98));
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.6), 0 6px 14px rgba(100,60,30,0.04);
  margin-top:10px;
}

/* exercise text */
.exercise { margin-top:10px; color:#6b4a39; font-size:14px; }

/* keyboard */
.keyboard-container { margin-top:20px; margin-bottom: 14px; padding:10px; border-radius:10px;
  background: linear-gradient(180deg, rgba(255,250,246,0.7), rgba(255,250,246,0.5));
  box-shadow: 0 6px 18px rgba(95,60,40,0.04);
}
#keyboard { position:relative; height:auto; min-height:130px; overflow:visible; padding-bottom:8px; }

/* keys */
.key { box-sizing:border-box; position:absolute; cursor:pointer; transition: transform .08s ease, box-shadow .08s ease; border-radius:4px; border:1px solid rgba(0,0,0,0.06); }
.key.white {
  background: var(--key-white);
  width: 40px; height:120px;
  box-shadow: 0 6px 12px rgba(90,60,40,0.06);
  z-index:1; border-radius:6px;
  display:flex; align-items:flex-end; justify-content:center; padding-bottom:6px; color:#7a5b4a; font-size:11px;
}
.key.black {
  background: linear-gradient(180deg,#2b1f1a,#1e1512);
  width: 26px; height:78px;
  z-index:5; border-radius:6px;
  box-shadow: 0 8px 18px rgba(0,0,0,0.38);
  color:#fff; display:inline-block;
}

/* black key vertical placement handled in CSS so they overlap white keys */
.key { bottom:6px; }          /* raise all keys slightly */
.key.black { bottom:36px; }   /* lift black keys so they overlap white keys */

/* key press & feedback */
.key:active { transform: translateY(2px) scale(.997); }
.key.active {
  transform: translateY(2px) scale(.997);
  box-shadow: 0 0 0 2px var(--accent-2), 0 4px 10px rgba(90,60,40,0.1);
}

.key.correct { box-shadow: 0 0 0 3px rgba(62, 195, 140, 0.18), 0 6px 16px rgba(62, 195, 140, 0.06); }
.key.wrong { box-shadow: 0 0 0 3px rgba(210,36,36,0.14), 0 6px 16px rgba(210,36,36,0.06); }

/* test controls */
.test-controls { margin-top:10px; display:flex; gap:10px; align-items:center; flex-wrap:wrap; color:#6b4a39; }
#testStatus { font-size:14px; color:#6b4a39; }
#scoreDisplay { font-weight:600; color:#4a3228; }

/* responsive tweaks */
@media (max-width:700px) {
  .controls { gap:8px; }
  canvas#staffCanvas { height:180px; }
  .key.white { width:34px; height:100px; }
  .key.black { width:22px; height:66px; bottom:28px; }
}